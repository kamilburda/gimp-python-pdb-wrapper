# PyCharm Stub Generator for GIMP

This Python script generates [PyCharm stubs](https://www.jetbrains.com/help/pycharm/stubs.html) to improve development of plug-ins for [GIMP 2.99](https://www.gimp.org/downloads/devel/). Specifically, this script generates stubs for the following GIMP and GTK modules:

    gio.repository.Gimp
    gio.repository.cairo


PyCharm is able to generate stubs for all other GIMP and GTK modules, but fails for these particular modules. This script mitigates this problem.

Additionally, this script provides a workaround to display type hints for GIMP PDB procedures (the bulk of GIMP API containing various image manipulation functions and filters). These are normally invoked via `Gimp.get_pdb().run_procedure('<procedure name as a string>', <arguments...>)`, for which stubs cannot be generated. The script provides a class that wraps calls to `Gimp.get_pdb().run_procedure()` and generates procedure stubs as dummy members of the class. This requires that you use the wrapper class in your plug-in code when invoking PDB procedures instead of the official `Gimp.get_pdb().run_procedure()`.


## Requirements

* GIMP 2.99.16 or later
* Python 3.9 or later


## Installation

1. Locate the directory for plug-ins in your GIMP installation by going to `Edit → Preferences → Folders → Plug-Ins`.
2. Choose one of the listed directories there and copy the `missing_pycharm_stub_generator` directory to one of the directories listed in step 1.


## Running the Generator

To run the stub generator, open GIMP and choose TODO.

You may adjust the output directory.
By default, the predefined completions are located in the TODO directory.

Alternatively, you may run the generator from the Python-Fu console - open GIMP, choose `Filters -> Development -> Python-Fu -> Console` and enter

    TODO


## Adding Generated Stubs to PyCharm

TODO


## Adding and Using GIMP PDB Stubs in PyCharm

TODO

Procedure names as class members are generated by replacing `-` with `_` to make them valid variable names.
